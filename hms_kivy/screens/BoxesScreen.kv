#:kivy 1.0

<BoxesScreen>:
    name: 'boxes'
    rv: rv

    canvas.before:
        Color:
            rgba: hsGreen
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        spacing: dp(5)
        padding: dp(10),dp(5),dp(10),dp(5)

        # Scroll list of your boxes

        RecycleView:
            id: rv
            viewclass: 'BoxViewRow'
            RecycleBoxLayout:
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                spacing: dp(5)

<BoxViewRow>
    orientation: 'horizontal'
    spacing: dp(5)
    padding: dp(10),dp(5),dp(10),dp(5)

    canvas.before:
        Color:
            rgba: (1,1,1,0.2)
        Rectangle:
            pos: self.pos
            size: self.size

    GridLayout:
        cols: 2
        size_hint_x: 0.65
        Label:
            text: 'Box Id: {}'.format(root.box.id if root.box else "")
            font_size: '20sp'
            text_size: self.size
            halign: 'left'
            valign: 'middle'
        Label:
            text: 'Bought Date: ' + ((root.box.bought_date or "") if root.box else "")
            # text: f"Bought Date: {root.box.bought_date or ''}"
            font_size: '20sp'
            text_size: self.size
            halign: 'left'
            valign: 'middle'
        Label:
            text: 'State: ' + (root.box.state_string if root.box else "")
            font_size: '20sp'
            text_size: self.size
            halign: 'left'
            valign: 'middle'
        Label:
            text: 'Removed Date: ' + ((root.box.removed_date or "") if root.box else "")
            font_size: '20sp'
            text_size: self.size
            halign: 'left'
            valign: 'middle'
    Button:
        id: print_button
        # font_size: '20sp'
        text: 'Print Label'
        size_hint_x: None
        text_size: self.size
        halign: 'center'
        valign: 'middle'

        # text_size: self.size
        # size_hint_y: None
        # text_size: self.width, None
        # height: self.texture_size[1]
        # size: self.texture_size
        on_release: root.box.print()
    Button:
        id: mark_button
        # font_size: '32sp'
        text: root.box.mark_string() if root.box else "Mark ..."
        size_hint_x: 0.2
        text_size: self.size
        halign: 'center'
        valign: 'middle'

        # size_hint_y: None
        # text_size: self.width, None
        # height: self.texture_size[1]
        # size: self.texture_size
        on_release: root.box.mark()
